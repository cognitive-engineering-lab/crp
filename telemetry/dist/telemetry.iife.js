var Telemetry=function(i){"use strict";var b=Object.defineProperty;var p=(i,t,d)=>t in i?b(i,t,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[t]=d;var m=(i,t,d)=>p(i,typeof t!="symbol"?t+"":t,d);const t=[];for(let e=0;e<256;++e)t.push((e+256).toString(16).slice(1));function d(e,n=0){return(t[e[n+0]]+t[e[n+1]]+t[e[n+2]]+t[e[n+3]]+"-"+t[e[n+4]]+t[e[n+5]]+"-"+t[e[n+6]]+t[e[n+7]]+"-"+t[e[n+8]]+t[e[n+9]]+"-"+t[e[n+10]]+t[e[n+11]]+t[e[n+12]]+t[e[n+13]]+t[e[n+14]]+t[e[n+15]]).toLowerCase()}let l;const a=new Uint8Array(16);function g(){if(!l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(a)}const u={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(e,n,c){var r;if(u.randomUUID&&!e)return u.randomUUID();e=e||{};const o=e.random??((r=e.rng)==null?void 0:r.call(e))??g();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,d(o)}function h(){const e="__telemetry_session";return localStorage.getItem(e)===null&&localStorage.setItem(e,y()),localStorage.getItem(e)}class s{constructor(n,c,o){m(this,"sessionId");this.url=n,this.commitHash=c,this.branch=o,this.sessionId=h()}log(n,c){let o={sessionId:this.sessionId,commitHash:this.commitHash,timestamp:new Date().getTime(),payload:c},r=`${this.url}/crp_${n}`;console.debug(`Logging to ${r}:`,o),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}}return typeof window<"u"&&(window.telemetry=new s("https://rust-book.willcrichton.net/logs","30a38e7e39b9849eea29f3dadf7f56bb87cab836","main")),i.Telemetry=s,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
