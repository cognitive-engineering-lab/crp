var Telemetry=function(i){"use strict";var b=Object.defineProperty;var p=(i,t,d)=>t in i?b(i,t,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[t]=d;var m=(i,t,d)=>p(i,typeof t!="symbol"?t+"":t,d);const t=[];for(let e=0;e<256;++e)t.push((e+256).toString(16).slice(1));function d(e,n=0){return(t[e[n+0]]+t[e[n+1]]+t[e[n+2]]+t[e[n+3]]+"-"+t[e[n+4]]+t[e[n+5]]+"-"+t[e[n+6]]+t[e[n+7]]+"-"+t[e[n+8]]+t[e[n+9]]+"-"+t[e[n+10]]+t[e[n+11]]+t[e[n+12]]+t[e[n+13]]+t[e[n+14]]+t[e[n+15]]).toLowerCase()}let l;const g=new Uint8Array(16);function a(){if(!l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(g)}const u={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(e,n,r){var c;if(u.randomUUID&&!e)return u.randomUUID();e=e||{};const o=e.random??((c=e.rng)==null?void 0:c.call(e))??a();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,d(o)}function h(){const e="__telemetry_session";return localStorage.getItem(e)===null&&localStorage.setItem(e,y()),localStorage.getItem(e)}class s{constructor(n,r,o){m(this,"sessionId");this.url=n,this.commitHash=r,this.branch=o,this.sessionId=h()}log(n,r){let o={sessionId:this.sessionId,commitHash:this.commitHash,timestamp:new Date().getTime(),payload:r},c=`${this.url}/crp_${n}`;console.debug(`Logging to ${c}:`,o),fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}}return typeof window<"u"&&(window.telemetry=new s("https://rust-book.willcrichton.net/logs","dba3bc55d86805db9dfb5e78cc5077eb0f00e776","main")),i.Telemetry=s,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
