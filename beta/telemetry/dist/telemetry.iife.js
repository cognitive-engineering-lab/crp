var Telemetry=function(o){"use strict";var p=Object.defineProperty;var w=(o,e,r)=>e in o?p(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var m=(o,e,r)=>w(o,typeof e!="symbol"?e+"":e,r);const e=[];for(let t=0;t<256;++t)e.push((t+256).toString(16).slice(1));function r(t,n=0){return(e[t[n+0]]+e[t[n+1]]+e[t[n+2]]+e[t[n+3]]+"-"+e[t[n+4]]+e[t[n+5]]+"-"+e[t[n+6]]+e[t[n+7]]+"-"+e[t[n+8]]+e[t[n+9]]+"-"+e[t[n+10]]+e[t[n+11]]+e[t[n+12]]+e[t[n+13]]+e[t[n+14]]+e[t[n+15]]).toLowerCase()}let c;const h=new Uint8Array(16);function g(){if(!c){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");c=crypto.getRandomValues.bind(crypto)}return c(h)}const u={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(t,n,l){var s;if(u.randomUUID&&!t)return u.randomUUID();t=t||{};const i=t.random??((s=t.rng)==null?void 0:s.call(t))??g();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,r(i)}function b(){const t="__telemetry_session";return localStorage.getItem(t)===null&&localStorage.setItem(t,y()),localStorage.getItem(t)}class d{constructor(n,l,i){m(this,"sessionId");this.url=n,this.commitHash=l,this.branch=i,this.sessionId=b()}log(n,l){if(!(this.branch==="main"||this.branch==="master")||window.location.hostname==="localhost"&&!this.url.includes("localhost"))return;let s={sessionId:this.sessionId,commitHash:this.commitHash,timestamp:new Date().getTime(),payload:l},a=`${this.url}/crp_${n}`;console.debug(`Logging to ${a}:`,s),fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}}return typeof window<"u"&&(window.telemetry=new d("https://rust-book.willcrichton.net/logs","f4b7bb08275775510de439887fafa0bee54611f2","beta")),o.Telemetry=d,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),o}({});
