var Telemetry=function(o){"use strict";var p=Object.defineProperty;var w=(o,e,c)=>e in o?p(o,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[e]=c;var a=(o,e,c)=>w(o,typeof e!="symbol"?e+"":e,c);const e=[];for(let t=0;t<256;++t)e.push((t+256).toString(16).slice(1));function c(t,n=0){return(e[t[n+0]]+e[t[n+1]]+e[t[n+2]]+e[t[n+3]]+"-"+e[t[n+4]]+e[t[n+5]]+"-"+e[t[n+6]]+e[t[n+7]]+"-"+e[t[n+8]]+e[t[n+9]]+"-"+e[t[n+10]]+e[t[n+11]]+e[t[n+12]]+e[t[n+13]]+e[t[n+14]]+e[t[n+15]]).toLowerCase()}let l;const h=new Uint8Array(16);function g(){if(!l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(h)}const d={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(t,n,s){var r;if(d.randomUUID&&!t)return d.randomUUID();t=t||{};const i=t.random??((r=t.rng)==null?void 0:r.call(t))??g();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,c(i)}function b(){const t="__telemetry_session";return localStorage.getItem(t)===null&&localStorage.setItem(t,y()),localStorage.getItem(t)}class u{constructor(n,s,i){a(this,"sessionId");this.url=n,this.commitHash=s,this.branch=i,this.sessionId=b()}log(n,s){if(!(this.branch==="main"||this.branch==="master")||window.location.hostname==="localhost"&&!this.url.includes("localhost"))return;let r={sessionId:this.sessionId,commitHash:this.commitHash,timestamp:new Date().getTime(),payload:s},m=`${this.url}/crp_${n}`;console.debug(`Logging to ${m}:`,r),fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}}return typeof window<"u"&&(window.telemetry=new u("https://rust-book.willcrichton.net/logs","ac38cd10b33ce1ec674d125d7b09657b689385f3","beta")),o.Telemetry=u,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),o}({});
