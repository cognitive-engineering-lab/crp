var Telemetry=function(i){"use strict";var b=Object.defineProperty;var p=(i,e,d)=>e in i?b(i,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[e]=d;var m=(i,e,d)=>p(i,typeof e!="symbol"?e+"":e,d);const e=[];for(let t=0;t<256;++t)e.push((t+256).toString(16).slice(1));function d(t,n=0){return(e[t[n+0]]+e[t[n+1]]+e[t[n+2]]+e[t[n+3]]+"-"+e[t[n+4]]+e[t[n+5]]+"-"+e[t[n+6]]+e[t[n+7]]+"-"+e[t[n+8]]+e[t[n+9]]+"-"+e[t[n+10]]+e[t[n+11]]+e[t[n+12]]+e[t[n+13]]+e[t[n+14]]+e[t[n+15]]).toLowerCase()}let u;const a=new Uint8Array(16);function g(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(a)}const c={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(t,n,l){var r;if(c.randomUUID&&!t)return c.randomUUID();t=t||{};const o=t.random??((r=t.rng)==null?void 0:r.call(t))??g();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,d(o)}function h(){const t="__telemetry_session";return localStorage.getItem(t)===null&&localStorage.setItem(t,y()),localStorage.getItem(t)}class s{constructor(n,l,o){m(this,"sessionId");this.url=n,this.commitHash=l,this.branch=o,this.sessionId=h()}log(n,l){let o={sessionId:this.sessionId,commitHash:this.commitHash,timestamp:new Date().getTime(),payload:l},r=`${this.url}/crp_${n}`;console.debug(`Logging to ${r}:`,o),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}}return typeof window<"u"&&(window.telemetry=new s("https://rust-book.willcrichton.net/logs","3095f48daa61f0f7322d712a38fd3a17297b632a","beta")),i.Telemetry=s,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
